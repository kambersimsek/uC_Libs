//**********************************************************************************************
// nt7534.c 
// (C)2010 Knuerr s.r.o, Ing. Lubos Melichar
//**********************************************************************************************
// - základní funkce pro práci s radicem/displejem
//**********************************************************************************************

#include <hw_def.h>
#include <types.h>
#include <my_spi.h>
#include <delay.h>
#include <stdio.h>
#include <NT7534.h>

//****************GRAFIKA*************************
static flash const char LOGO_KNUERR[1024] = {                                                       
    0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x80,0x80,0xC0,0x60,0x60,0x30,0x18,0x1C,0x18,0x30,0x60,0x60,0xC0,0x80,0x80,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
    0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x80,0xE0,0x70,0x38,0x3C,0x1E,0x1F,0x1F,0x9F,0x0C,0x0C,0x0E,0x0E,0xFE,0xFE,0xFE,0x0E,0x0E,0x0C,0x0C,0x9F,0x1F,0x1F,0x1E,0x3C,0x38,0x70,0xE0,0x80,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
    0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0xF0,0xFE,0xFF,0x07,0x00,0x00,0x00,0xF8,0xFE,0xFF,0x01,0x00,0x00,0x00,0x00,0x00,0xFF,0xFF,0xFF,0x00,0x00,0x00,0x00,0x00,0x01,0xFF,0xFE,0xF8,0x00,0x00,0x00,0x07,0xFF,0xFE,0xF0,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
    0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x01,0x03,0x0F,0x3E,0x78,0xF0,0xE0,0xE0,0xC7,0x8F,0x8E,0x90,0x00,0x00,0x00,0x00,0xFF,0xFF,0xFF,0x00,0x00,0x00,0x00,0x90,0x8E,0x8F,0xC7,0xE0,0xE0,0xF0,0x78,0x3E,0x0F,0x03,0x01,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
    0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x07,0x7F,0xFF,0xF1,0x01,0x03,0x03,0x03,0x03,0x03,0x03,0x07,0x03,0x03,0x03,0x03,0x03,0x03,0x01,0xF1,0xFF,0x7F,0x07,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
    0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0xF0,0xF8,0xFC,0x3E,0x0E,0x0F,0x07,0x07,0x07,0x07,0x0E,0x3E,0xFC,0xF8,0xE0,0xC0,0xE0,0xE0,0xE0,0x70,0x7F,0x7F,0x70,0x60,0xE0,0xC0,0xC0,0xC0,0xC0,0xC0,0xC0,0xC0,0xC0,0xC0,0xE0,0x60,0x70,0x7F,0x7F,0x70,0xE0,0xE0,0xE0,0xC0,0xE0,0xF8,0xFC,0x3E,0x0E,0x07,0x07,0x07,0x07,0x0F,0x0E,0x3E,0xFC,0xF8,0xF0,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
    0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x1F,0x1F,0x3F,0x39,0x70,0x70,0xE0,0xE0,0xE0,0xC0,0xC0,0x80,0x80,0x00,0x00,0x01,0x01,0x01,0x01,0x01,0x00,0x00,0x80,0x80,0xC0,0xC0,0xE0,0xE0,0xE0,0x70,0x70,0x39,0x3F,0x1F,0x1F,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
    0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x01,0x01,0x03,0x03,0x07,0x07,0x07,0x0E,0x0C,0x1C,0x0C,0x0E,0x07,0x07,0x07,0x03,0x03,0x01,0x01,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00
};
static flash const char FontLookup_Extended [1][5] = {
    { 0x00, 0x07, 0x05, 0x07, 0x00 }      //°          
};

static flash const char FontLookup [91][5] = {
    { 0x00, 0x00, 0x00, 0x00, 0x00 },   // sp
    { 0x00, 0x00, 0x2f, 0x00, 0x00 },   // !
    { 0x00, 0x07, 0x00, 0x07, 0x00 },   // "
    { 0x14, 0x7f, 0x14, 0x7f, 0x14 },   // #
    { 0x24, 0x2a, 0x7f, 0x2a, 0x12 },   // $
    { 0xc4, 0xc8, 0x10, 0x26, 0x46 },   // %
    { 0x36, 0x49, 0x55, 0x22, 0x50 },   // &
    { 0x00, 0x05, 0x03, 0x00, 0x00 },   // '
    { 0x00, 0x1c, 0x22, 0x41, 0x00 },   // (
    { 0x00, 0x41, 0x22, 0x1c, 0x00 },   // ) 
    
    { 0x14, 0x08, 0x3E, 0x08, 0x14 },   // *
    { 0x08, 0x08, 0x3E, 0x08, 0x08 },   // +
    { 0x00, 0x00, 0x50, 0x30, 0x00 },   // ,
    { 0x10, 0x10, 0x10, 0x10, 0x10 },   // -
    { 0x00, 0x60, 0x60, 0x00, 0x00 },   // .
    { 0x20, 0x10, 0x08, 0x04, 0x02 },   // /
    { 0x3E, 0x51, 0x49, 0x45, 0x3E },   // 0
    { 0x00, 0x42, 0x7F, 0x40, 0x00 },   // 1
    { 0x42, 0x61, 0x51, 0x49, 0x46 },   // 2
    { 0x21, 0x41, 0x45, 0x4B, 0x31 },   // 3
    
    { 0x18, 0x14, 0x12, 0x7F, 0x10 },   // 4
    { 0x27, 0x45, 0x45, 0x45, 0x39 },   // 5
    { 0x3C, 0x4A, 0x49, 0x49, 0x30 },   // 6
    { 0x01, 0x71, 0x09, 0x05, 0x03 },   // 7
    { 0x36, 0x49, 0x49, 0x49, 0x36 },   // 8
    { 0x06, 0x49, 0x49, 0x29, 0x1E },   // 9
    { 0x00, 0x36, 0x36, 0x00, 0x00 },   // :
    { 0x00, 0x56, 0x36, 0x00, 0x00 },   // ;
    { 0x08, 0x14, 0x22, 0x41, 0x00 },   // <
    { 0x14, 0x14, 0x14, 0x14, 0x14 },   // =
    
    { 0x00, 0x41, 0x22, 0x14, 0x08 },   // >
    { 0x02, 0x01, 0x51, 0x09, 0x06 },   // ?
    { 0x32, 0x49, 0x59, 0x51, 0x3E },   // @
    { 0x7E, 0x11, 0x11, 0x11, 0x7E },   // A
    { 0x7F, 0x49, 0x49, 0x49, 0x36 },   // B
    { 0x3E, 0x41, 0x41, 0x41, 0x22 },   // C
    { 0x7F, 0x41, 0x41, 0x22, 0x1C },   // D
    { 0x7F, 0x49, 0x49, 0x49, 0x41 },   // E
    { 0x7F, 0x09, 0x09, 0x09, 0x01 },   // F
    { 0x3E, 0x41, 0x49, 0x49, 0x7A },   // G
    
    { 0x7F, 0x08, 0x08, 0x08, 0x7F },   // H
    { 0x00, 0x41, 0x7F, 0x41, 0x00 },   // I
    { 0x20, 0x40, 0x41, 0x3F, 0x01 },   // J
    { 0x7F, 0x08, 0x14, 0x22, 0x41 },   // K
    { 0x7F, 0x40, 0x40, 0x40, 0x40 },   // L
    { 0x7F, 0x02, 0x0C, 0x02, 0x7F },   // M
    { 0x7F, 0x04, 0x08, 0x10, 0x7F },   // N
    { 0x3E, 0x41, 0x41, 0x41, 0x3E },   // O
    { 0x7F, 0x09, 0x09, 0x09, 0x06 },   // P
    { 0x3E, 0x41, 0x51, 0x21, 0x5E },   // Q
    
    { 0x7F, 0x09, 0x19, 0x29, 0x46 },   // R
    { 0x46, 0x49, 0x49, 0x49, 0x31 },   // S
    { 0x01, 0x01, 0x7F, 0x01, 0x01 },   // T
    { 0x3F, 0x40, 0x40, 0x40, 0x3F },   // U
    { 0x1F, 0x20, 0x40, 0x20, 0x1F },   // V
    { 0x3F, 0x40, 0x38, 0x40, 0x3F },   // W
    { 0x63, 0x14, 0x08, 0x14, 0x63 },   // X
    { 0x07, 0x08, 0x70, 0x08, 0x07 },   // Y
    { 0x61, 0x51, 0x49, 0x45, 0x43 },   // Z
    { 0x00, 0x7F, 0x41, 0x41, 0x00 },   // [
    
    { 0x55, 0x2A, 0x55, 0x2A, 0x55 },   // 55
    { 0x00, 0x41, 0x41, 0x7F, 0x00 },   // ]
    { 0x04, 0x02, 0x01, 0x02, 0x04 },   // ^
    { 0x40, 0x40, 0x40, 0x40, 0x40 },   // _
    { 0x00, 0x01, 0x02, 0x04, 0x00 },   // '
    { 0x20, 0x54, 0x54, 0x54, 0x78 },   // a
    { 0x7F, 0x48, 0x44, 0x44, 0x38 },   // b
    { 0x38, 0x44, 0x44, 0x44, 0x20 },   // c
    { 0x38, 0x44, 0x44, 0x48, 0x7F },   // d
    { 0x38, 0x54, 0x54, 0x54, 0x18 },   // e 
    
    { 0x08, 0x7E, 0x09, 0x01, 0x02 },   // f
    { 0x0C, 0x52, 0x52, 0x52, 0x3E },   // g
    { 0x7F, 0x08, 0x04, 0x04, 0x78 },   // h
    { 0x00, 0x44, 0x7D, 0x40, 0x00 },   // i
    { 0x20, 0x40, 0x44, 0x3D, 0x00 },   // j
    { 0x7F, 0x10, 0x28, 0x44, 0x00 },   // k
    { 0x00, 0x41, 0x7F, 0x40, 0x00 },   // l
    { 0x7C, 0x04, 0x18, 0x04, 0x78 },   // m
    { 0x7C, 0x08, 0x04, 0x04, 0x78 },   // n
    { 0x38, 0x44, 0x44, 0x44, 0x38 },   // o
    
    { 0x7C, 0x14, 0x14, 0x14, 0x08 },   // p
    { 0x08, 0x14, 0x14, 0x18, 0x7C },   // q
    { 0x7C, 0x08, 0x04, 0x04, 0x08 },   // r
    { 0x48, 0x54, 0x54, 0x54, 0x20 },   // s
    { 0x04, 0x3F, 0x44, 0x40, 0x20 },   // t
    { 0x3C, 0x40, 0x40, 0x20, 0x7C },   // u
    { 0x1C, 0x20, 0x40, 0x20, 0x1C },   // v
    { 0x3C, 0x40, 0x30, 0x40, 0x3C },   // w
    { 0x44, 0x28, 0x10, 0x28, 0x44 },   // x
    { 0x0C, 0x50, 0x50, 0x50, 0x3C },   // y
    
    { 0x44, 0x64, 0x54, 0x4C, 0x44 }    // z          
};


void NT7534_clear_screen(void);
void NT7534_set_position(unsigned char x_high, unsigned char x_low, unsigned char y);
void w_command(unsigned char data);
void w_data(unsigned char data);
void NT7534_printf(unsigned char flash *cp);
void NT7534_print(unsigned char *cp);
void NT7534_Display_Init();
void knuerr_logo(void);

void NT7534_Init(){
    
    //nastaveni portu
    PIN_A0_DDR = 1;     //data
    PIN_RES_DDR = 1;    //reset
    NT7534_CS_DDR = 1;  //cs
    
    //init values 
    
    //reset
    RES = 0;
    delay_us(50);
    RES = 1;
    
    //CS deactive
    NT7534_CLEAR_CS;
    
    //init SPI
    SPI_MasterInit();  
    
    delay_us(50); 
        
    //init display    
    NT7534_Display_Init();  
    
    delay_us(50); 
    NT7534_clear_screen();
    delay_us(50); 
    knuerr_logo();        
}

//init display
void NT7534_Display_Init(){

    //NT7534_SET_CS;
    w_command( 0xA3 );   //LCD bias setting (11)
    w_command( 0xA1 );   //ADC selection (8)
    w_command( 0xC0 );   //Select COM output scan direction (15)  
    w_command( 0x24 );   //Setting the built-in resistance ratio for regulation of the V0 voltage (17)
                
    w_command( 0x81 );   //Electric volume Mode Set (18)       
    w_command( 0x2F );   //Electric volume Register Set (18)
               
    w_command( 0x2F );   //Power control seting (16)        
    w_command( 0xA7 );   // LCD in normal mode (9)
             
    NT7534_clear_screen();
                    
    w_command( 0x7F );   //Display start line set (2)
    w_command( 0xB0 );   //Page address set (3)
    w_command( 0x10 );   //Column Address set (4) High nibble (10h to 18h)
    w_command( 0x05 );   //Column address set (4) Low nibble (00h to 0Fh)      
            
    NT7534_printf("Inicializace OK");        
                                                                                
    w_command( 0xAF );   //LCD on (1) 
    
    //NT7534_CLEAR_CS;              

}


void NT7534_manager(){
    static byte aux_cnt = 0;
    byte my_string[20]; 
    //byte* pRows[4] = {"ahoj","cau","nazdar","pic"}; 
    
    //NT7534_set_screen(pRows);
    
    //NT7534_clear_screen();
    NT7534_set_position(0,1,0);    
    aux_cnt++; 
             
    if(aux_cnt<10){
        sprintf(my_string, "frekvence:  %d      ", 70 - aux_cnt);
        NT7534_print(my_string);   
        //disp_str("Consider it solved!!!");
    }
    else if (aux_cnt<11){
        NT7534_set_position(0,1,1);
        NT7534_printf("Nejsem povinen být takový, jaký bych podle ostatních lidí mìl být. Je to jejich omyl, a ne moje selhání - Richard Feynman");
    }
    else
        aux_cnt = 0;            
    
        
}

//zobrazi X stringu na X radcich displeje
void NT7534_set_screen(byte *pRows[NR_ROWS]){
    byte i;
    
    for(i=0; i<NR_ROWS; i++){
         NT7534_set_position(0,1,i);
         NT7534_print(pRows[i]);                     
    }
    
}
void NT7534_set_paging(byte current, byte max){
    char aus_string[21];
    sprintf(aus_string, "                  %u/%u", current, max);
    NT7534_set_position(0,1,7);
    NT7534_print(aus_string); 
}


//clear display
void NT7534_clear_screen(void){
    unsigned char i,j;      
     w_command(0x7F);      //Set Display Start Line = com0
     for(i=0;i<8;i++){
         w_command(0xB0|i);    //Set Page Address
         w_command(0x10);      //Set Column Address = 0
         w_command(0x01);      //Colum from 1 -> 129 auto add
         for(j=0;j<132;j++)
            w_data( 0x00 );   //Display data write (6)         
     }                         

 }

//set cursor to position
void NT7534_set_position(unsigned char x_high, unsigned char x_low, unsigned char y){    
    
    
    w_command( 0x7F );   //Display start line set (2)
    
    x_high|=0x10;
    w_command(x_high);
    
    if(x_high==0x10){ 
        x_low|=0x04;
    }
    else{
        x_low|=0x00;
    }    
    w_command(x_low);
    
    y|=0xB0;
    w_command(y);  
}


/* PRINT CHAR
   - 2 tabulky znaku FontLookup a FontLookup_Extended
   - "FontLookup" kopiruje ascii tabulku s offsetem -32, ve "FontLookup_Extended" jsou specielni znaky
   - specielni znak -> nahradi se 0-31, tiskne se znak s timto indexem z tabulky FontLookup_Extended
   - normalni znak  -> vezme se jeho ascii hodnota odecte se 32 a tiskne se znak s timto indexem z tabulky FontLookup 
*/
void NT7534_print_char(unsigned char chr){
        
    unsigned char i=0;
     
     
    //nahradit specielni znaky (0-31)
    if(chr == '°')        
        chr = 0;
        
    //escape unprintable chars with space            
    else if ( (chr < 0x20) || (chr > 0x7b) ) // resim pouze tisknutelne znaky - tj. 32(sp) az 123(z) viz. ASCII        
        chr = 64; // pokud bude zadan netisknutelny znak, napise se misto nej mezera    
                                  
     
    for(i=0; i<5; i++){
    
        //specielni znaky -> FontLookup_Extended
        if(chr<32)    
            w_data(FontLookup_Extended[chr][i]);
            
        //normalni znak -> FontLookup                        
        else
            w_data(FontLookup[chr-32][i]); //odecitam 32 pro dosazeni pozadovane radky v Look up tabulce
    }    
        
    w_data(0); // odsazeni za pismenkem
    
}  

//print string
void NT7534_print(unsigned char *cp){
         
    for (; *cp; cp++)
        NT7534_print_char(*cp);
} 

//print flash string
void NT7534_printf(unsigned char flash *cp){
         
    for (; *cp; cp++)
        NT7534_print_char(*cp);
}

//send command or data, basic function for w_command() and w_data()
void w_command_data(byte command_data, byte data){
    
    //active CS
    NT7534_SET_CS;                           
    
    if(command_data)
        PIN_A0 = 0;
    else
        PIN_A0 = 1;
        
    delay_us(10);  
    
    SPI_MasterTransmit(data);
    
    delay_us(10); 
    
    //deactive CS
    NT7534_CLEAR_CS;
}   

void w_command(unsigned char data){
    w_command_data(1, data);    
}

void w_data(unsigned char data){
    w_command_data(0, data);  
} 
    



/* TEST FUNCTIONs */


void knuerr_logo(void){
    byte i;
    word row;        
        
    for(row=0; row<8; row++){ 
        NT7534_set_position(0,1,(byte)row);
        for(i=0;i<128;i++)
            w_data(LOGO_KNUERR[i + 128*row]);                
    }  
}
//chessboard
void chessboard(void){
    unsigned char i,j;
    
     w_command(0x40);      //Set Display Start Line = com0
     for(i=0;i<8;i++)
     {
             w_command(0xB0|i);    //Set Page Address
             w_command(0x10);      //Set Column Address = 0
             w_command(0x04);      //Colum from 1 -> 129 auto add
                 
        if(i%2)     
          {
             for(j=0;j<8;j++)
             {       
                     //disp_write(0x10|j,0);      //Set Column Address = 0
                    
                     w_data( 0xFF );   //Display data write (6)
                     w_data( 0x00 );   //Display data write (6)
                     w_data( 0x00 );   //Display data write (6)
                     w_data( 0x00 );   //Display data write (6)
                     w_data( 0x00 );   //Display data write (6)
                     w_data( 0x00 );   //Display data write (6)
                     w_data( 0x00 );   //Display data write (6)
                     w_data( 0x00 );   //Display data write (6)    
                     w_data( 0xFF );   //Display data write (6)
                     w_data( 0xFF );   //Display data write (6)
                     w_data( 0xFF );   //Display data write (6)
                     w_data( 0xFF );   //Display data write (6)
                     w_data( 0xFF );   //Display data write (6)
                     w_data( 0xFF );   //Display data write (6)
                     w_data( 0xFF );   //Display data write (6)
                     w_data( 0xFF );   //Display data write (6)           
             }   
          }
              
        else
          {
            for(j=0;j<8;j++)
             {       
                     w_data( 0xFF );   //Display data write (6)
                     w_data( 0xFF );   //Display data write (6)
                     w_data( 0xFF );   //Display data write (6)
                     w_data( 0xFF );   //Display data write (6)
                     w_data( 0xFF );   //Display data write (6)
                     w_data( 0xFF );   //Display data write (6)
                     w_data( 0xFF );   //Display data write (6)
                     w_data( 0xFF );   //Display data write (6)
                     w_data( 0x00 );   //Display data write (6)
                     w_data( 0x00 );   //Display data write (6)
                     w_data( 0x00 );   //Display data write (6)
                     w_data( 0x00 );   //Display data write (6)
                     w_data( 0x00 );   //Display data write (6)
                     w_data( 0x00 );   //Display data write (6)
                     w_data( 0x00 );   //Display data write (6)
                     w_data( 0x00 );   //Display data write (6)                                                                 
             }
          }  
              
              
              
                      
     }                         
 }

